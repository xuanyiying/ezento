E诊通接口文档

1. 用户认证模块
1.1 用户登录
接口: /api/auth/login
方法: POST
请求参数:
 {
    "username": "string",
    "password": "string"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "token": "string",
      "userId": "string",
      "role": "PATIENT|DOCTOR",
      "userName": "string"
    }
  }
1.2 用户注册
接口: /api/auth/register
方法: POST
请求参数:
{
    "username": "string",
    "password": "string",
    "name": "string",
    "phone": "string",
    "role": "PATIENT|DOCTOR"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "userId": "string"
    }
  }
2. 患者端接口
2.1 预问诊
2.1.1 提交预问诊信息
接口: /api/patient/prediagnosis
方法: POST
请求参数:
{
    "patientId": "string",
    "symptoms": "string",
    "duration": "string",
    "bodyParts": ["string"],
    "images": ["base64 encoded string"],
    "existingConditions": "string"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "prediagnosisId": "string",
      "status": "SUBMITTED",
      "createTime": "timestamp"
    }
  }
2.1.2 获取预问诊记录列表
接口: /api/patient/prediagnosis/list
方法: GET
请求参数:
 {
   patientId: string
   page: number
   limit: number
 }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 10,
      "list": [{
        "prediagnosisId": "string",
        "symptoms": "string",
        "status": "SUBMITTED|PROCESSING|COMPLETED",
        "createTime": "timestamp",
        "doctorName": "string"
      }]
    }
  }
2.1.3 获取预问诊详情
接口: /api/patient/prediagnosis/{id}
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "prediagnosisId": "string",
      "patientInfo": {
        "name": "string",
        "age": "number",
        "gender": "string"
      },
      "symptoms": "string",
      "duration": "string",
      "bodyParts": ["string"],
      "images": ["url"],
      "existingConditions": "string",
      "doctorAdvice": "string",
      "status": "SUBMITTED|PROCESSING|COMPLETED",
      "createTime": "timestamp"
    }
  }
2.2 导诊服务
2.2.1 获取科室列表
接口: /api/guide/departments
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": [{
      "id": "string",
      "name": "string",
      "description": "string"
    }]
  }
2.2.2 获取推荐医生
接口: /api/guide/recommend-doctors
方法: POST
请求参数:
  {
    "symptoms": "string",
    "departmentId": "string"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": [{
      "doctorId": "string",
      "name": "string",
      "department": "string",
      "title": "string",
      "specialties": "string",
      "avatar": "url",
      "rating": "number"
    }]
  }
2.3 报告解读
2.3.1 上传报告
接口: /api/patient/reports/upload
方法: POST
请求参数:
  {
    "patientId": "string",
    "reportType": "LABORATORY|IMAGING|PATHOLOGY",
    "reportDate": "date",
    "hospital": "string",
    "reportImages": ["base64 encoded string"],
    "description": "string"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "reportId": "string"
    }
  }
2.3.2 获取报告列表
接口: /api/patient/reports/list
方法: GET
请求参数:
{  
    patientId: string
    page: number
    limit: number
    reportType: string (optional)
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 10,
      "list": [{
        "reportId": "string",
        "reportType": "LABORATORY|IMAGING|PATHOLOGY",
        "reportDate": "date",
        "hospital": "string",
        "status": "PENDING|INTERPRETED",
        "createTime": "timestamp"
      }]
    }
  }
2.3.3 获取报告详情
接口: /api/patient/reports/{id}
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "reportId": "string",
      "patientInfo": {
        "name": "string",
        "age": "number",
        "gender": "string"
      },
      "reportType": "LABORATORY|IMAGING|PATHOLOGY",
      "reportDate": "date",
      "hospital": "string",
      "reportImages": ["url"],
      "description": "string",
      "interpretation": {
        "doctorId": "string",
        "doctorName": "string",
        "content": "string",
        "createTime": "timestamp"
      },
      "status": "PENDING|INTERPRETED"
    }
  }
3. 医生端接口
3.1 患者管理
3.1.1 获取患者列表
接口: /api/doctor/patients
方法: GET
请求参数:
{
    doctorId: string
    page: number
    limit: number
    keyword: string (optional)
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 100,
      "list": [{
        "patientId": "string",
        "name": "string",
        "gender": "string",
        "age": "number",
        "phone": "string",
        "lastVisit": "date"
      }]
    }
  }
3.1.2 获取患者详情
接口: /api/doctor/patients/{id}
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "patientId": "string",
      "name": "string",
      "gender": "string",
      "age": "number",
      "birthDate": "date",
      "phone": "string",
      "address": "string",
      "occupation": "string",
      "medicalHistory": "string",
      "allergies": "string",
      "emergencyContact": {
        "name": "string",
        "relationship": "string",
        "phone": "string"
      }
    }
  }
3.2 病历管理
3.2.1 获取病历列表
接口: /api/doctor/medical-records
方法: GET
请求参数:
{
   doctorId: string
   patientId: string (optional)
   page: number
   limit: number
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 50,
      "list": [{
        "recordId": "string",
        "patientName": "string",
        "visitDate": "date",
        "diagnosis": "string",
        "recordType": "OUTPATIENT|INPATIENT",
        "department": "string"
      }]
    }
  }
3.2.2 获取病历详情
接口: /api/doctor/medical-records/{id}
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "recordId": "string",
      "patientInfo": {
        "id": "string",
        "name": "string",
        "gender": "string",
        "age": "number",
        "birthDate": "date",
        "occupation": "string"
      },
      "visitDate": "date",
      "department": "string",
      "doctorName": "string",
      "chiefComplaint": "string",
      "presentIllness": "string",
      "pastHistory": "string",
      "personalHistory": "string",
      "familyHistory": "string",
      "allergicHistory": "string",
      "physicalExamination": "string",
      "auxiliaryExamination": "string",
      "diagnosis": "string",
      "treatmentPlan": "string",
      "medications": [{
        "name": "string",
        "dosage": "string",
        "frequency": "string",
        "route": "string",
        "duration": "string"
      }]
    }
  }
3.2.3 创建/更新病历
接口: /api/doctor/medical-records
方法: POST
请求参数:
  {
    "recordId": "string (optional, 存在则更新)",
    "patientId": "string",
    "doctorId": "string",
    "visitDate": "date",
    "department": "string",
    "chiefComplaint": "string",
    "presentIllness": "string",
    "pastHistory": "string",
    "personalHistory": "string",
    "familyHistory": "string",
    "allergicHistory": "string",
    "physicalExamination": "string",
    "auxiliaryExamination": "string",
    "diagnosis": "string",
    "treatmentPlan": "string",
    "medications": [{
      "name": "string",
      "dosage": "string",
      "frequency": "string",
      "route": "string",
      "duration": "string"
    }]
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "recordId": "string"
    }
  }
3.3 预问诊处理
3.3.1 获取预问诊列表
接口: /api/doctor/prediagnosis/list
方法: GET
请求参数:
{
    doctorId: string
    status: string (optional)
    page: number
    limit: number
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 20,
      "list": [{
        "prediagnosisId": "string",
        "patientName": "string",
        "symptoms": "string",
        "status": "SUBMITTED|PROCESSING|COMPLETED",
        "createTime": "timestamp"
      }]
    }
  }
3.3.2 获取预问诊详情
接口: /api/doctor/prediagnosis/{id}
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "prediagnosisId": "string",
      "patientInfo": {
        "id": "string",
        "name": "string",
        "gender": "string",
        "age": "number"
      },
      "symptoms": "string",
      "duration": "string",
      "bodyParts": ["string"],
      "images": ["url"],
      "existingConditions": "string",
      "doctorAdvice": "string",
      "status": "SUBMITTED|PROCESSING|COMPLETED",
      "createTime": "timestamp"
    }
  }
3.3.3 提交预问诊建议
接口: /api/doctor/prediagnosis/advice
方法: POST
请求参数:
  {
    "prediagnosisId": "string",
    "doctorId": "string",
    "advice": "string",
    "recommendDepartment": "string",
    "urgencyLevel": "NORMAL|URGENT|EMERGENCY"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "updated": true
    }
  }
3.4 报告解读
3.4.1 获取待解读报告列表
接口: /api/doctor/reports/list
方法: GET
请求参数:
{
    doctorId: string
    status: string (optional)
    page: number
    limit: number
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 15,
      "list": [{
        "reportId": "string",
        "patientName": "string",
        "reportType": "LABORATORY|IMAGING|PATHOLOGY",
        "reportDate": "date",
        "hospital": "string",
        "status": "PENDING|INTERPRETED",
        "createTime": "timestamp"
      }]
    }
  }
3.4.2 提交报告解读
接口: /api/doctor/reports/interpret
方法: POST
请求参数:
  {
    "reportId": "string",
    "doctorId": "string",
    "interpretation": "string",
    "findings": "string",
    "recommendations": "string"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "updated": true
    }
  }
3.5 处方管理
3.5.1 创建处方
接口: /api/doctor/prescriptions
方法: POST
请求参数:
  {
    "patientId": "string",
    "doctorId": "string",
    "recordId": "string",
    "diagnosis": "string",
    "medications": [{
      "name": "string",
      "specification": "string",
      "dosage": "string",
      "frequency": "string",
      "route": "string",
      "duration": "string",
      "quantity": "number",
      "notes": "string"
    }],
    "notes": "string"
  }
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "prescriptionId": "string"
    }
  }
3.5.2 获取处方列表
接口: /api/doctor/prescriptions/list
方法: GET
请求参数:
{
   doctorId: string
   patientId: string (optional)
   page: number
   limit: number
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "total": 30,
      "list": [{
        "prescriptionId": "string",
        "patientName": "string",
        "createTime": "timestamp",
        "diagnosis": "string",
        "status": "DRAFT|ISSUED|FILLED"
      }]
    }
  }
3.5.3 获取处方详情
接口: /api/doctor/prescriptions/{id}
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "prescriptionId": "string",
      "patientInfo": {
        "id": "string",
        "name": "string",
        "gender": "string",
        "age": "number",
        "weight": "number"
      },
      "doctorInfo": {
        "id": "string",
        "name": "string",
        "department": "string",
        "title": "string"
      },
      "diagnosis": "string",
      "medications": [{
        "name": "string",
        "specification": "string",
        "dosage": "string",
        "frequency": "string",
        "route": "string",
        "duration": "string",
        "quantity": "number",
        "notes": "string"
      }],
      "notes": "string",
      "createTime": "timestamp",
      "status": "DRAFT|ISSUED|FILLED"
    }
  }
4. 通用接口
4.1 文件上传
接口: /api/files/upload
方法: POST
请求参数:
{
    file: multipart/form-data
    type: string (IMAGE|DOCUMENT|REPORT)
}
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "fileId": "string",
      "url": "string"
    }
  }
4.2 系统配置
接口: /api/system/config
方法: GET
响应:
  {
    "code": 200,
    "message": "success",
    "data": {
      "departments": [{
        "id": "string",
        "name": "string"
      }],
      "reportTypes": ["LABORATORY", "IMAGING", "PATHOLOGY"],
      "medicationRoutes": ["ORAL", "INJECTION", "TOPICAL"]
    }
  }
